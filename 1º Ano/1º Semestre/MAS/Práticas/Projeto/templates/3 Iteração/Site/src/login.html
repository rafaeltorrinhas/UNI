<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap">
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.css' integrity='sha512-tx5+1LWHez1QiaXlAyDwzdBTfDjX07GMapQoFTS74wkcPMsI3So0KYmFe6EHZjI8+eSG0ljBlAQc3PQ5BTaZtQ==' crossorigin='anonymous'/>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css' integrity='sha512-b2QcS5SsA8tZodcDtGRELiGv5SaKSk1vDHDaQRda0htPYWZ6046lr3kJ5bAAQdpV2mmA/4v0wQF9MyU6/pDIAg==' crossorigin='anonymous'/>
  <link rel="stylesheet" href="./styles/styles.css">
</head>

<body>
  <div class="container">
    <div class="center">
      <img src="./img/Logo1.png">
    </div>
    <div class="center">
      <p></p>
      <label><b>E-mail</b></label>
      <p><input class="normal" type="email" id="emailInput" placeholder="exemplo@ua.pt" name="email" required>
      <p></p>
      <label><b>Password</b></label>
      <input class="normal password" type="password" id="passwordInput" placeholder="Password" name="psw" required>
      <p></p>
      <button class="login align-content-center text-black" onclick="saveCredentialsAndRedirect()">Entrar</button>
      <p></p>
      <a href="./register.html">
        <button class="register align-content-center text-white">Registar</button>
      </a>
    </div>

    <script>
      function saveCredentialsAndRedirect() {
        var email = document.getElementById('emailInput').value;

        // Simple email validation
        if (!isValidEmail(email)) {
          alert("Please enter a valid email address.");
          return;
        }

        localStorage.setItem('savedEmail', email);
        window.location.href = "./index.html";
      }

      function isValidEmail(email) {
        // Basic email validation using a regular expression
        var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }

      window.onload = function () {
        var savedEmail = localStorage.getItem('savedEmail');

        if (savedEmail) {
          document.getElementById('emailInput').value = savedEmail;
        }
      };
    </script>
  </div>
</body>

</html>